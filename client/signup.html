<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign Up | CO2 Calculator</title>
    <link rel="stylesheet" href="CSS/index.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Inter:400,500,700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="background-image"></div>
    <nav class="navbar">
      <div class="nav-logo">
        <span class="logo-circle">CO<sub>2</sub></span>
        <span class="logo-text">Calculator</span>
      </div>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="features.html">Features</a></li>
      </ul>
    </nav>
    <header>
      <h1>
        <span class="eco-icon">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
            <ellipse cx="16" cy="16" rx="14" ry="14" fill="#eafaf1" />
            <path
              d="M10 20c2-6 10-8 12-4s-2 8-8 8"
              stroke="#2e8b57"
              stroke-width="2"
              fill="none"
              stroke-linecap="round"
            />
          </svg>
        </span>
        CO<sub>2</sub> Calculator
      </h1>
      <p>Create your account to start tracking your carbon footprint.</p>
    </header>
    <main>
      <div class="center-content">
        <h2 class="tagline">
          Track, Understand, and Reduce Your Carbon Footprint
        </h2>
        <ul class="feature-list">
          <li>
            <span class="feature-icon">üå±</span>
            <span>Personalized CO<sub>2</sub> tracking</span>
          </li>
          <li>
            <span class="feature-icon">üìà</span>
            <span>Visualize your impact over time</span>
          </li>
          <li>
            <span class="feature-icon">üí°</span>
            <span>Get actionable tips to go greener</span>
          </li>
        </ul>
        <div class="center-buttons">
          <button id="open-signup" class="main-btn">Sign Up</button>
          <button id="open-login" class="main-btn">Log In</button>
        </div>
        <blockquote class="testimonial">
          <span
            >‚ÄúEvery small step counts. Start your journey to a greener future
            today!‚Äù</span
          >
        </blockquote>
      </div>
      <!-- Signup Modal -->
      <div id="signup-modal" class="modal hidden">
        <div class="modal-content modern-modal">
          <button
            class="close-modal"
            id="close-signup-modal"
            aria-label="Close"
          >
            <svg width="28" height="28" viewBox="0 0 28 28">
              <line
                x1="7"
                y1="7"
                x2="21"
                y2="21"
                stroke="#2e8b57"
                stroke-width="2"
                stroke-linecap="round"
              />
              <line
                x1="21"
                y1="7"
                x2="7"
                y2="21"
                stroke="#2e8b57"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </button>
          <section class="auth-form modern-form">
            <h2>Sign Up</h2>
            <form id="signup-form" autocomplete="off">
              <div class="form-group">
                <label for="signup-username">Username</label>
                <input
                  type="text"
                  id="signup-username"
                  name="username"
                  required
                  minlength="3"
                  maxlength="32"
                  placeholder="Your username"
                />
              </div>
              <div class="form-group">
                <label for="signup-email">Email</label>
                <input
                  type="email"
                  id="signup-email"
                  name="email"
                  required
                  placeholder="you@email.com"
                />
              </div>
              <div class="form-group">
                <label for="signup-password">Password</label>
                <input
                  type="password"
                  id="signup-password"
                  name="password"
                  required
                  minlength="6"
                  placeholder="Create a password"
                />
              </div>
              <button type="submit" class="main-btn wide">Sign Up</button>
            </form>
            <p class="auth-switch">
              Already have an account?
              <a href="#" id="switch-to-login">Log in</a>
            </p>
          </section>
        </div>
      </div>
      <!-- Login Modal -->
      <div id="login-modal" class="modal hidden">
        <div class="modal-content modern-modal">
          <button class="close-modal" id="close-login-modal" aria-label="Close">
            <svg width="28" height="28" viewBox="0 0 28 28">
              <line
                x1="7"
                y1="7"
                x2="21"
                y2="21"
                stroke="#2e8b57"
                stroke-width="2"
                stroke-linecap="round"
              />
              <line
                x1="21"
                y1="7"
                x2="7"
                y2="21"
                stroke="#2e8b57"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </button>
          <section class="auth-form modern-form">
            <h2>Log In</h2>
            <form id="login-form" autocomplete="off">
              <div class="form-group">
                <label for="login-email">Email</label>
                <input
                  type="email"
                  id="login-email"
                  name="email"
                  required
                  placeholder="you@email.com"
                />
              </div>
              <div class="form-group">
                <label for="login-password">Password</label>
                <input
                  type="password"
                  id="login-password"
                  name="password"
                  required
                  minlength="6"
                  placeholder="Your password"
                />
              </div>
              <button type="submit" class="main-btn wide">Log In</button>
            </form>
            <p class="auth-switch">
              Don't have an account?
              <a href="#" id="switch-to-signup">Sign up</a>
            </p>
          </section>
        </div>
      </div>
    </main>
    <footer>
      <p>
        &copy; 2025 CO2 Calculator. Made with
        <span aria-label="love">‚ù§Ô∏è</span> for a greener planet.
      </p>
    </footer>
    <script>
      // Show modal
      document.getElementById("open-signup").onclick = function () {
        document.getElementById("signup-modal").classList.remove("hidden");
      };
      // Hide modal
      document.getElementById("close-signup-modal").onclick = function () {
        document.getElementById("signup-modal").classList.add("hidden");
      };
      // Go to login
      document.getElementById("open-login").onclick = function () {
        document.getElementById("login-modal").classList.remove("hidden");
      };
      document.getElementById("close-login-modal").onclick = function () {
        document.getElementById("login-modal").classList.add("hidden");
      };
      // Switch to login from signup
      document.getElementById("switch-to-login").onclick = function (e) {
        e.preventDefault();
        document.getElementById("signup-modal").classList.add("hidden");
        document.getElementById("login-modal").classList.remove("hidden");
      };
      // Switch to signup from login
      document.getElementById("switch-to-signup").onclick = function (e) {
        e.preventDefault();
        document.getElementById("login-modal").classList.add("hidden");
        document.getElementById("signup-modal").classList.remove("hidden");
      };
      // Optional: Close modal on outside click
      document.getElementById("signup-modal").onclick = function (e) {
        if (e.target === this) this.classList.add("hidden");
      };
      document.getElementById("login-modal").onclick = function (e) {
        if (e.target === this) this.classList.add("hidden");
      };

      // Modal logic
      document.getElementById("open-signup").onclick = function () {
        document.getElementById("signup-modal").classList.remove("hidden");
      };
      document.getElementById("close-signup-modal").onclick = function () {
        document.getElementById("signup-modal").classList.add("hidden");
      };
      document.getElementById("open-login").onclick = function () {
        document.getElementById("login-modal").classList.remove("hidden");
      };
      document.getElementById("close-login-modal").onclick = function () {
        document.getElementById("login-modal").classList.add("hidden");
      };
      document.getElementById("switch-to-login").onclick = function (e) {
        e.preventDefault();
        document.getElementById("signup-modal").classList.add("hidden");
        document.getElementById("login-modal").classList.remove("hidden");
      };
      document.getElementById("switch-to-signup").onclick = function (e) {
        e.preventDefault();
        document.getElementById("login-modal").classList.add("hidden");
        document.getElementById("signup-modal").classList.remove("hidden");
      };
      document.getElementById("signup-modal").onclick = function (e) {
        if (e.target === this) this.classList.add("hidden");
      };
      document.getElementById("login-modal").onclick = function (e) {
        if (e.target === this) this.classList.add("hidden");
      };

      // --- Simple browser-memory signup/login logic ---
      function getUsers() {
        return JSON.parse(localStorage.getItem("co2_users") || "[]");
      }
      function saveUsers(users) {
        localStorage.setItem("co2_users", JSON.stringify(users));
      }

      // Signup
      document.getElementById("signup-form").onsubmit = function (e) {
        e.preventDefault();
        const username = document
          .getElementById("signup-username")
          .value.trim();
        const email = document
          .getElementById("signup-email")
          .value.trim()
          .toLowerCase();
        const password = document.getElementById("signup-password").value;
        let users = getUsers();
        if (users.some((u) => u.email === email)) {
          alert("Email already registered.");
          return;
        }
        users.push({ username, email, password });
        saveUsers(users);
        alert("Signup successful! You can now log in.");
        document.getElementById("signup-modal").classList.add("hidden");
        document.getElementById("login-modal").classList.remove("hidden");
      };

      // Login
      document.getElementById("login-form").onsubmit = function (e) {
        e.preventDefault();
        const email = document
          .getElementById("login-email")
          .value.trim()
          .toLowerCase();
        const password = document.getElementById("login-password").value;
        let users = getUsers();
        const user = users.find(
          (u) => u.email === email && u.password === password
        );
        if (user) {
          localStorage.setItem("co2_loggedin", JSON.stringify(user));
          alert("Login successful!");
          window.location.href = "home.html";
        } else {
          alert("Invalid email or password.");
        }
      };
    </script>
  </body>
</html>
